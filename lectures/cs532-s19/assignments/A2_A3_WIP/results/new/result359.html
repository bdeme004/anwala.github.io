b'Administraci\xef\xbe\x83\xef\xbd\xb3n , Deployment , Desarrollo\nSalesforce CLI: la herramienta de automatizaci\xc3\xb3n para\xc2\xa0todos\nExisten muchos art\xef\xbe\x83\xef\xbd\xadculos sobre los comandos que podemos lanzar con la linea de comandos de Salesforce, la llamada Salesforce CLI.\nPero en muchas ocasiones, me pregunto si al mostrar todos esos comandos, conseguimos realmente transmitir las capacidades y los beneficios que la CLI puede aportar a todos, sin excepci\xef\xbe\x83\xef\xbd\xb3n.\nPor este motivo, este art\xef\xbe\x83\xef\xbd\xadculo tiene un enfoque completamente distinto.\nEste art\xef\xbe\x83\xef\xbd\xadculo tiene una aproximaci\xef\xbe\x83\xef\xbd\xb3n completamente distinta, ya que pretende transmitir las capacidades de la CLI, sin mostrar ni una l\xef\xbe\x83\xef\xbd\xadnea de comando, y enumerar las capacidades y profundizar en los beneficios, de su uso.\nComo explicar\xef\xbe\x83\xef\xbd\xa9 en este art\xef\xbe\x83\xef\xbd\xadculo, la CLI nos aplica a todos, y seguramente ser\xef\xbe\x83\xef\xbd\xa1 una de las herramientas, que marcar\xef\xbe\x83\xef\xbd\xa1 la diferencia entre los equipos que la internalicen en sus procesos y en los que no lo hagan.\nA nivel personal, quiero ya enfatizarte que esta herramienta aplica a cualquier rol que ejerzas, tanto de Administrador, Desarrollador, Devops \xef\xbe\x83\xef\xbd\xb3 Arquitecto.\n\xef\xbe\x82\xef\xbd\xbfPara qu\xef\xbe\x83\xef\xbd\xa9 sirve la CLI? \xef\xbe\x82\xef\xbd\xbfC\xef\xbe\x83\xef\xbd\xb3mo me puede ayudar?\nExiste cierta confusi\xef\xbe\x83\xef\xbd\xb3n, a que esta CLI est\xef\xbe\x83\xef\xbd\xa1 asociada al desarrollo exclusivo de proyectos DX, por lo que muchos no la abordamos en nuestros proyectos actuales. Para ahondar en este malentendido, su invocaci\xef\xbe\x83\xef\xbd\xb3n se realiza con el comando sfdx, con lo que cualquier miembro de la comunidad expuesto a una presentaci\xef\xbe\x83\xef\xbd\xb3n de CLI, lo descarta si no est\xef\xbe\x83\xef\xbd\xa1 involucrado en proyectos DX, y Zasca (como dir\xef\xbe\x83\xef\xbd\xada mi hija mayor).\nCapacidades de la CLI\nLa Salesforce CLI permite la automatizaci\xef\xbe\x83\xef\xbd\xb3n de tareas de Salesforce, tanto a nivel de infraestructura, programaci\xef\xbe\x83\xef\xbd\xb3n, despliegue y mantenimiento de datos. Del grado de automatizaci\xef\xbe\x83\xef\xbd\xb3n depende de las tareas repetitivas que nos gustar\xef\xbe\x83\xef\xbd\xada liberarnos.\nLa Salesforce CLI ayuda a reducir los tiempos de ejecuci\xef\xbe\x83\xef\xbd\xb3n de tareas, e incluso construir nuevos flujos complejos de tareas, que la CLI aporta nativamente.\nCoste-Beneficio\nSi aplicamos el principio del Obispo Amish nos deber\xef\xbe\x83\xef\xbd\xadamos preguntar: \xef\xbe\x82\xef\xbd\xbfCu\xef\xbe\x83\xef\xbd\xa1l es la relaci\xef\xbe\x83\xef\xbd\xb3n coste-beneficio de esta nueva herramienta y por qu\xef\xbe\x83\xef\xbd\xa9 es bueno para nosotros adoptarla?\nLa automatizaci\xef\xbe\x83\xef\xbd\xb3n de tareas que permite la CLI, nos libera de la ejecuci\xef\xbe\x83\xef\xbd\xb3n de procesos manuales, que siendo valiosos, son tediosos y consumen tiempo que podr\xef\xbe\x83\xef\xbd\xadamos dedicar a otras tareas de m\xef\xbe\x83\xef\xbd\xa1s valor.\nMover datos, crear entornos, despliegue de metadata, son tareas fundamentales en un proyecto, de gran valor, pero que deben ser automatizadas y repetibles por cualquier miembro del equipo, con el mismo resultado (deben ser idempotentes).\nDesafortunadamente, la mayor\xef\xbe\x83\xef\xbd\xada de equipos dependen de la buena voluntad, \xef\xbe\x83\xef\xbd\xb3 de las capacidades de scripting que alguno de ellos tuviera, y se apa\xef\xbe\x83\xef\xbd\xb1an como pueden individualmente. Esto supone un riesgo, dado que no existe un modelo sobre el que vayamos creciendo y mejorando, sin\xef\xbe\x83\xef\xbd\xb3 creando islas de procesos distintos.\nLa curva de aprendizaje de la CLI es realmente baja, no es una CLI como la de un sistema operativo, como cientos de comandos, con infinidad de par\xef\xbe\x83\xef\xbd\xa1metros, sino que est\xef\xbe\x83\xef\xbd\xa1 estructurada y pensada para ser absorbida r\xef\xbe\x83\xef\xbd\xa1pidamente por cualquiera expuesto a Salesforce.\nLa CLI no tiene coste de licenciamiento, puede ser usada en cualquier entorno, desde un ordenador personal, hasta servidores de integraci\xef\xbe\x83\xef\xbd\xb3n continua.\nPor tanto, el coste-beneficio es positivo casi en cualquier situaci\xef\xbe\x83\xef\xbd\xb3n, su exposici\xef\xbe\x83\xef\xbd\xb3n no comporta riesgos, y en cambio nos libera tiempo. Incluso podemos realizar tareas que no \xef\xbe\x83\xef\xbd\xa9ramos capaces de realizar hasta ahora, o que no consider\xef\xbe\x83\xef\xbd\xa1bamos por el coste que nos supon\xef\xbe\x83\xef\xbd\xadan.\n\xef\xbe\x82\xef\xbd\xbfA qui\xef\xbe\x83\xef\xbd\xa9n puede ayudar? \xef\xbe\x82\xef\xbd\xbfEs \xef\xbe\x83\xef\xbd\xbanicamente para desarrolladores?\nEsta respuesta para mi es la clave: es PARA TODOS, sin excepci\xef\xbe\x83\xef\xbd\xb3n, y no est\xef\xbe\x83\xef\xbd\xa1 destinada exclusivamente a desarrolladores para nada.\nDado que la CLI permite automatizar tareas en cualquiera de las fases en las que est\xef\xbe\x83\xef\xbd\xa9s participando, obtendr\xef\xbe\x83\xef\xbd\xa1s optimizaciones de tus flujos casi en cualquier \xef\xbe\x83\xef\xbd\xa1rea.\nA modo de ejemplo, te expongo algunas de los automatizaciones que nos permite la CLI:\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n de la Creaci\xef\xbe\x83\xef\xbd\xb3n de entornos de desarrollo, test, e integraci\xef\xbe\x83\xef\xbd\xb3n.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n de las tareas que forman parte de los procesos de CI/CD.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n de la creaci\xef\xbe\x83\xef\xbd\xb3n de Packages tanto de 1a como de 2a generaci\xef\xbe\x83\xef\xbd\xb3n.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n de lectura y escritura de datos entre entornos.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n de ejecuci\xef\xbe\x83\xef\xbd\xb3n de Tests.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n para la obtenci\xef\xbe\x83\xef\xbd\xb3n de datos de uso.\nAutomatizaci\xef\xbe\x83\xef\xbd\xb3n para obtenci\xef\xbe\x83\xef\xbd\xb3n de informaci\xef\xbe\x83\xef\xbd\xb3n del esquema de objetos.\netc.\nPor tanto, NO son capacidades exclusivas del \xef\xbe\x83\xef\xbd\xa1mbito de desarrollo, sino que pueden eficientar muchas de las fases del proyecto y puede ser usada por todos.\nSino uso la CLI, \xef\xbe\x82\xef\xbd\xbfme estoy perdiendo alguna cosa?\nDesde mi punto de vista si. Al no automatizar tareas repetitivas, el tiempo invertido en estas tareas no se destina a otras tareas de mayor valor personales o del proyecto.\nPero no solo hablo de eficiencia, en cuanto a calidad, disponer de procesos automatizados, supone que en los momentos de mayor presi\xef\xbe\x83\xef\xbd\xb3n, evitaremos omisiones y errores, y falsos atajos siendo capaces de repetir los mismos procesos y comparar resultados etc.\nAdem\xef\xbe\x83\xef\xbd\xa1s, la profesionalidad percibida por el destinatario del proyecto, es completamente distinta, ya que ofreciendo procesos repetibles, damos poder a los procesos y disminuimos las dependencias con las personas. Adem\xef\xbe\x83\xef\xbd\xa1s, los procesos automatizados, son susceptibles de ser adaptados a nuevas necesidades, en cambio los procesos manuales que realizaba un miembro que ya no est\xef\xbe\x83\xef\xbd\xa1 no lo son, es decir, mayor valor para el cliente.\nEn proyectos con equipos de varias personas, los mecanismos de automatizaci\xef\xbe\x83\xef\xbd\xb3n disminuyen la fricci\xef\xbe\x83\xef\xbd\xb3n, los errores y las confusiones, y permiten socializar procedimientos para su mejora continua con la aportaciones de todos los miembros o incluso del destinatario del proyecto.\nFinalmente me llama mucho la atenci\xef\xbe\x83\xef\xbd\xb3n que la penetraci\xef\xbe\x83\xef\xbd\xb3n de metodolog\xef\xbe\x83\xef\xbd\xadas \xef\xbe\x83\xef\xbd\xa1giles sea muy elevada en la mayor\xef\xbe\x83\xef\xbd\xada de empresas, pero los proyectos de Salesforce no dispongan habitualmente de procesos automatizados que alivien la carga en los Sprints, aportando procesos de automatizaci\xef\xbe\x83\xef\xbd\xb3n de creaci\xef\xbe\x83\xef\xbd\xb3n de entornos, movimiento de datos, ejecuci\xef\xbe\x83\xef\xbd\xb3n de tests, despliegues automatizados, etc.\nPor tanto, no usando la CLI, si est\xef\xbe\x83\xef\xbd\xa1s perdiendo algo, quiz\xef\xbe\x83\xef\xbd\xa1s demasiado.\nSalesforce CLI no es (\xef\xbe\x83\xef\xbd\xbanicamente) para Salesforce DX\nIt\xe7\xaa\xb6\xe5\x86\xb1 the Salesforce CLI\xe7\xaa\xb6\xe6\xb8\xa1ot the Salesforce DX CLI\nEsta frase extra\xef\xbe\x83\xef\xbd\xadda del t\xef\xbe\x83\xef\xbd\xadtulo del post publicado por Ren\xef\xbe\x83\xef\xbd\xa9 Winkelmeyer (evangelista de DX y de la CLI) deja claro que no es necesario conocer DX, ni tener proyectos DX, para aprovechar las funcionalidades de la CLI.\nComo ver\xef\xbe\x83\xef\xbd\xa1s a continuaci\xef\xbe\x83\xef\xbd\xb3n, muchos de los comandos de CLI, son ejecutables en cualquier proyecto sea DX o tradicional.\nDe hecho, para algunos comandos no hace falta ni tener un proyecto, con tan solo autorizar una de las Sandboxes u Orgs productivas con las que trabajamos, es suficiente para utilizar muchos comandos con los que realizar automatizaciones de nuestras tareas.\nSin embargo, es cierto, que existen comandos que solo pueden utilizarse con Scratch Orgs por ejemplo, pero ni son la mayor\xef\xbe\x83\xef\xbd\xada y a cada nueva versi\xef\xbe\x83\xef\xbd\xb3n de la CLI se van disminuyendo.\nLa CLI permite la automatizaci\xef\xbe\x83\xef\xbd\xb3n de tareas en cualquier proyecto, sea o no en formato DX, por tanto, destierra la idea de que no es para t\xef\xbe\x83\xef\xbd\xad, porque casi con total seguridad te puede ayudar en tus flujos de trabajo.\n\xef\xbe\x82\xef\xbd\xbfQu\xef\xbe\x83\xef\xbd\xa9 necesito para usarla y cuales son sus requerimientos?\nPara ejecutar la CLI solo necesitas un ordenador con sistema operativo Windows, Linux o MacOS. Instalarla te llevar\xef\xbe\x83\xef\xbd\xa1 unos minutos, y ya la tendr\xef\xbe\x83\xef\xbd\xa1s disponible para su uso.\nPor supuesto, tambi\xef\xbe\x83\xef\xbd\xa9n puedes realizar su instalaci\xef\xbe\x83\xef\xbd\xb3n en servidores, para establecer procesos de automatizaci\xef\xbe\x83\xef\xbd\xb3n a nivel de proyecto, departamento, empresa, etc. Los comandos, estan pensados para ello, y por ejemplo, el flujo de autorizaci\xef\xbe\x83\xef\xbd\xb3n puede ser mediante Login interactivo en la Org, pero tambi\xef\xbe\x83\xef\xbd\xa9n mediante un token JWT, generado previamente.\nLos requerimientos de la CLI son realmente b\xef\xbe\x83\xef\xbd\xa1sicos, pero sobretodo, conocerla y querer usarla.\nHabiendo establecido quienes podemos beneficiarnos, cual es la relaci\xef\xbe\x83\xef\xbd\xb3n coste-beneficio y los requerimientos de ejecuci\xef\xbe\x83\xef\xbd\xb3n, veamos a nivel detallado cuales son sus capacidades.\nApartados de la CLI\nOtro objetivo de esta entrada consiste en reducir la curva de aprendizaje de lo que ofrece la CLI a 15\xe2\x80\xb2, lo que tardar\xef\xbe\x83\xef\xbd\xa1s en leerlo.\nActualmente, en la versi\xef\xbe\x83\xef\xbd\xb3n en la que escribo este art\xef\xbe\x83\xef\xbd\xadculo (6.51.1), la CLI est\xef\xbe\x83\xef\xbd\xa1 formada por 17 grupos de comandos. Todos ellos agrupados bajo un super-apartado denominado force. La nomenclatura correcta es:\nforce es lo que se denomina el namespace\nCada uno de los 17 apartados lo llamamos grupos de comandos \xef\xbe\x83\xef\xbd\xb3 topics\nA mi personalmente, me cuesta entender cuando tengo que analizar 17 apartados distintos relativos a un tema, y autom\xef\xbe\x83\xef\xbd\xa1ticamente me surgen las dudas: \xef\xbe\x82\xef\xbd\xbfSon todos importantes?, \xef\xbe\x82\xef\xbd\xbfExisten dependencias entre ellos que debo respetar para entenderlos y/o usarlos?\nPor tanto, para facilitar tu curva de aprendizaje, mi propuesta es la siguiente:\nHe agrupado todos los topics en 5 \xef\xbe\x83\xef\xbd\xa1reas\nCada \xef\xbe\x83\xef\xbd\xa1rea agrupa topics por funcionalidad o afinidad, por lo que podr\xef\xbe\x83\xef\xbd\xa1s centrarte en los que m\xef\xbe\x83\xef\xbd\xa1s te apliquen\nEn cada \xef\xbe\x83\xef\xbd\xa1rea comento sus capacidades, mi entendimiento si vas a utilizarlo inmediatamente, y si es imprescindible que la conozcas.\nLas 5 \xef\xbe\x83\xef\xbd\xa1reas son:\nMecanizaci\xef\xbe\x83\xef\xbd\xb3n de la CLI: tecnicismos que debes conocer para el uso correcto y eficiente de la CLI, entender que debo autorizar las Orgs, que es m\xef\xbe\x83\xef\xbd\xa1s eficiente y f\xef\xbe\x83\xef\xbd\xa1cil utilizar alias y usernames, etc.\nCreaci\xef\xbe\x83\xef\xbd\xb3n de c\xef\xbe\x83\xef\xbd\xb3digo: permite la creaci\xef\xbe\x83\xef\xbd\xb3n/gesti\xef\xbe\x83\xef\xbd\xb3n de elementos funcionales, como la creaci\xef\xbe\x83\xef\xbd\xb3n de clases Apex, de Tests, etc.\nManipulaci\xef\xbe\x83\xef\xbd\xb3n de datos: permite la manipulaci\xef\xbe\x83\xef\xbd\xb3n de datos, para consultarlos, exportarlos e importarlos.\nGesti\xef\xbe\x83\xef\xbd\xb3n de despliegues: permite el aprovisionamiento de elementos funcionales hac\xef\xbe\x83\xef\xbd\xada instancias (Scratch ORGs, Dev Orgs, etc.), realizando operaciones de retrieve, deploy, push, pull, merge, etc., tanto en el modelo tradicional como DX.\nGesti\xef\xbe\x83\xef\xbd\xb3n de ORGs: permite la gesti\xef\xbe\x83\xef\xbd\xb3n del ciclo de vida de ORGs, para creaci\xef\xbe\x83\xef\xbd\xb3n de Orgs de distintos tipos y controlar su ciclo de vida.\nLa clasificaci\xef\xbe\x83\xef\xbd\xb3n de los topics en las \xef\xbe\x83\xe3\x80\x89eas anteriores queda de la siguiente manera:\n\xef\xbe\x82\xef\xbd\xbfQu\xef\xbe\x83\xef\xbd\xa9 topics engloba cada \xef\xbe\x83\xef\xbd\xa1rea y qu\xef\xbe\x83\xef\xbd\xa9 topics la conforman?\nVeamos ahora las funciones principales de cada una de las \xef\xbe\x83\xef\xbd\xa1reas y sus topics:\n\xef\xbe\x83\xe3\x80\x89ea 1: Mecanizaci\xef\xbe\x83\xef\xbd\xb3n de la CLI\nEsta \xef\xbe\x83\xef\xbd\xa1rea debes conocerla porque es la base del uso de la CLI. Los conceptos son muy simples:\nPara usar una Org existente debo autorizarla y/o crearla.\nPara crear Scratch Orgs debo tener una Org de tipo Dev Hub que debo autorizar.\nPara simplificar la escritura de comandos, en lugar de escribir URLs largu\xef\xbe\x83\xef\xbd\xadsimas, utilizamos usernames y alias.\nExisten numerosas variables de entorno que podemos modificar para tunear algunos comandos e incluso simplificarlos.\nPara todos los comandos de la CLI, tienes documentaci\xef\xbe\x83\xef\xbd\xb3n en linea, que debes si o si saber invocar y utilizar (es trivial).\nFinalmente puedes automatizar la creaci\xef\xbe\x83\xef\xbd\xb3n de proyectos, que \xef\xbe\x83\xef\xbd\xbanicamente te aplicar\xef\xbe\x83\xef\xbd\xa1 si vas a automatizar ese aspecto.\nGrupo de comandos force:auth\nLos comandos de este topic permiten:\nAutorizar ORGs existentes y as\xef\xbe\x83\xef\xbd\xad ya quedan registradas para su uso.\nSu usa el t\xef\xbe\x83\xef\xbd\xadpico flujo interactivo del navegador con usuario y password (Web-based Flow), pero tambi\xef\xbe\x83\xef\xbd\xa9n permite el flujo de la utilizaci\xef\xbe\x83\xef\xbd\xb3n de un token Json generado con certificado (JWT-based Flow), pensado para el uso en servidores.\nEl de-registro es otra de las funcionalidades y puede realizarse de forma unitaria o de todas las Orgs.\nLas opciones de este apartado son imprescindibles, debes conocerlas a fondo y no te llevar\xef\xbe\x83\xef\xbd\xa1 m\xef\xbe\x83\xef\xbd\xa1s de 15\xe2\x80\xb2 y muy pocos comandos.\nGrupo de comandos  force:alias\nLos comandos de este topic permiten:\nPara facilitar el trabajo se registran los usernames de las Orgs autorizadas y se asignan alias que simplifican la escritura de los comandos.\nLos comandos de este apartado debes conocerlos y dominarlos, son muy poquitos y en cambio te ser\xef\xbe\x83\xef\xbd\xa1n de mucha utilidad.\nGrupo de comandos force:config\nLos comandos de este topic permiten:\nConfiguraci\xef\xbe\x83\xef\xbd\xb3n de las variables de ejecuci\xef\xbe\x83\xef\xbd\xb3n de la CLI, tanto a nivel global como proyecto.\nMi recomendaci\xef\xbe\x83\xef\xbd\xb3n es que conozcas qu\xef\xbe\x83\xef\xbd\xa9 variables existen, y como su modificaci\xef\xbe\x83\xef\xbd\xb3n puede afectar a tus scripts de automatizaci\xef\xbe\x83\xef\xbd\xb3n. Teniendo esto en mente, a medida, que te vayas adentrando en el uso de la CLI, recordar\xef\xbe\x83\xef\xbd\xa1s o re-visitar\xef\xbe\x83\xef\xbd\xa1s estas variables para adaptarlas a tus casos de uso.\nGrupo de comandos force:doc\nLos comandos de este topic permiten:\nObtenci\xef\xbe\x83\xef\xbd\xb3n de ayuda de los comandos de la CLI.\nFamiliarizarte con ellos te llevar\xef\xbe\x83\xef\xbd\xa1 solo unos minutos y en cambio te ser\xef\xbe\x83\xef\xbd\xa1n de much\xef\xbe\x83\xef\xbd\xadsima ayuda, son imprescindibles, debes usarlos desde el 1r minuto.\nGrupo de comandos force:project\nLos comandos de este topic permiten:\nCrear proyectos DX que pueden incluir la definici\xef\xbe\x83\xef\xbd\xb3n del Package que vas a desarrollar. La creaci\xef\xbe\x83\xef\xbd\xb3n del proyecto, puede incluir la descarga de metadata (package.xml) o la creaci\xef\xbe\x83\xef\xbd\xb3n de un paquete completo que se est\xef\xbe\x83\xef\xbd\xa9 desarrollando.\nNuevamente las caracter\xef\xbe\x83\xef\xbd\xadsticas espec\xef\xbe\x83\xef\xbd\xadficas de este proyecto no quedan al libre albedr\xef\xbe\x83\xef\xbd\xado de cada desarrollador, sin\xef\xbe\x83\xef\xbd\xb3 que quedan detalladas en un fichero de configuraci\xef\xbe\x83\xef\xbd\xb3n denominado sfdx-project.json.\nEs decir, ya no dependemos de documentaci\xef\xbe\x83\xef\xbd\xb3n obsoleta e incompleta que un compa\xef\xbe\x83\xef\xbd\xb1ero elabor\xef\xbe\x83\xef\xbd\xb3 hace unos meses para crear nuestro entorno de desarrollo, sin\xef\xbe\x83\xef\xbd\xb3 que mediante la ejecuci\xef\xbe\x83\xef\xbd\xb3n de un script lo podremos repetir una y otra vez, y como formar\xef\xbe\x83\xef\xbd\xa1 parte de nuestro repositorio de c\xef\xbe\x83\xef\xbd\xb3digo, como un artefacto m\xef\xbe\x83\xef\xbd\xa1s, lo iremos evolucionando en el tiempo.\n\xef\xbe\x83\xe3\x80\x89ea 2: Creaci\xef\xbe\x83\xef\xbd\xb3n de c\xef\xbe\x83\xef\xbd\xb3digo\nEn esta \xef\xbe\x83\xef\xbd\xa1rea he agrupado los grupos de comandos que nos facilitan la creaci\xef\xbe\x83\xef\xbd\xb3n de c\xef\xbe\x83\xef\xbd\xb3digo: apex, ligthning y visualforce. Estas capacidades quedan claramente enfocadas a su utilizaci\xef\xbe\x83\xef\xbd\xb3n dentro de herramientas como IDEs, ALM, etc., pero puedes encarar casos de uso donde su uso simplifique tus procesos.\nDudo que sea el caso de uso de muchos de nosotros, y por lo tanto, solo deber\xef\xbe\x83\xef\xbd\xa1s plantearte ahondar en ella, si contemplas la creaci\xef\xbe\x83\xef\xbd\xb3n de c\xef\xbe\x83\xef\xbd\xb3digo al vuelo. No confundas las creaci\xef\xbe\x83\xef\xbd\xb3n de c\xef\xbe\x83\xef\xbd\xb3digo, con despliegue de metadata o transferencia de elementos entre entornos, esas capacidades est\xef\xbe\x83\xef\xbd\xa1n disponibles en la siguiente \xef\xbe\x83\xef\xbd\xa1rea.\nGrupo de comandos force:apex\nLos comandos de este topic permiten:\nCrear de clases Apex y triggers..\nEjecutar bloques de c\xef\xbe\x83\xef\xbd\xb3digo APEX an\xef\xbe\x83\xef\xbd\xb3nimos.\nEjecuci\xef\xbe\x83\xef\xbd\xb3n de Tests. Con este mecanismo podemos solicitar la ejecuci\xef\xbe\x83\xef\xbd\xb3n de todos los tests, los de una/s clase/s concreta/s o solicitar la ejecuci\xef\xbe\x83\xef\xbd\xb3n as\xef\xbe\x83\xef\xbd\xadncrona/s\xef\xbe\x83\xef\xbd\xadncrona de los Tests.\nObtener los Logs de debug, y poderlos analizar, comunicar, etc.\nGrupo de comandos force:lightning\nLos comandos de este topic permiten:\nCreaci\xef\xbe\x83\xef\xbd\xb3n y Test de componentes Aura y Lightning Web Components y linting de c\xef\xbe\x83\xef\xbd\xb3digo.\nGrupo de comandos force:visualforce\nLos comandos de este topic permiten:\nCreaci\xef\xbe\x83\xef\xbd\xb3n de componentes y p\xef\xbe\x83\xef\xbd\xa1ginas Visualforce.\nCon la idea puesta en la automatizaci\xef\xbe\x83\xef\xbd\xb3n de procesos de CI/CD, este grupo de comandos es altamente relevante, enti\xef\xbe\x83\xef\xbd\xa9ndelo bien, sobretodo en lo que respecta a automatizaci\xef\xbe\x83\xef\xbd\xb3n de tests.\n\xef\xbe\x83\xe3\x80\x89ea 3: Gesti\xef\xbe\x83\xef\xbd\xb3n de despliegues\nEsta es la \xef\xbe\x83\xef\xbd\xa1rea con m\xef\xbe\x83\xef\xbd\xa1s capacidades de las 5 y seguramente la que estoy seguro vas a utilizar in crescendo.\nPermite la automatizaci\xef\xbe\x83\xef\xbd\xb3n de cualquiera de los mecanismos de despliegue entre entornos, ya sea en proyectos tradicionales con Metadata o en modelo DX. Permite la creaci\xef\xbe\x83\xef\xbd\xb3n de paquetes de 1a y 2a generaci\xef\xbe\x83\xef\xbd\xb3n y automatizar tareas de inspecci\xef\xbe\x83\xef\xbd\xb3n de metadata, creaci\xef\xbe\x83\xef\xbd\xb3n de usuarios, etc., que son funcionalidades que habitualmente se requieren para automatizar un proceso de CI/CD.\nGrupo de comandos force:mdapi\nDesplegar es uno de los procesos m\xef\xbe\x83\xef\xbd\xa1s costosos, problem\xef\xbe\x83\xef\xbd\xa1ticos y estresantes que realizamos en un proyecto. Para ello utilizamos habitualmente la Metadata API. Estos comandos permiten:\nAutomatizar la transformaci\xef\xbe\x83\xef\xbd\xb3n del formato DX al formato Metadata cl\xef\xbe\x83\xef\xbd\xa1sico y as\xef\xbe\x83\xef\xbd\xad aprovechar los comandos disponibles de Dx.\nUtilizar los comandos cl\xef\xbe\x83\xef\xbd\xa1sicos de Deploy y Retrieve de metadata, sin necesidad de disponer de un proyecto DX.\nGrupo de comandos force:package\nEste topic, proporciona los comandos para la ejecuci\xef\xbe\x83\xef\xbd\xb3n del nuevo paradigma de paquetes que aparecen con la 2nd Generation Package. B\xef\xbe\x83\xef\xbd\xa1sicamente evolucionan los Unmanaged y Managed packages en nuevos hom\xef\xbe\x83\xef\xbd\xb3nimos: Unlocked y Managed 2GP respectivamente. Es decir:\nDisponemos de comandos para crear los 2 nuevos tipos de packages. Mediante ficheros de descripci\xef\xbe\x83\xef\xbd\xb3n, detallamos las caracter\xef\xbe\x83\xef\xbd\xadsticas del paquete y compartirlo con cualquier miembro del equipo para que pueda reproducir su creaci\xef\xbe\x83\xef\xbd\xb3n de la misma manera.\nPor supuesto existen comandos para la gesti\xef\xbe\x83\xef\xbd\xb3n de versiones, y obtener el escandallo de estas.\nEste es uno de los temas, que m\xef\xbe\x83\xef\xbd\xa1s me interesa especialmente, porque tanto ISVs pero especialmente clientes finales, tenemos ahora las capacidades de abordar el empaquetamiento de funcionalidades como lo realizan otros lenguajes (Java, PHP, etc.), independizando el despliegue entre paquetes (pr\xef\xbe\x83\xef\xbd\xb3ximas entradas de este blog hablar\xef\xbe\x83\xef\xbd\xa1n ampliamente de este tema).\nGrupo de comandos force:package1\nSe refiere a los comandos que ya utilizamos para la construcci\xef\xbe\x83\xef\xbd\xb3n de Managed y Unmanaged packages que conocemos hist\xef\xbe\x83\xef\xbd\xb3ricamente. Los comandos de este topic permiten:\nCreaci\xef\xbe\x83\xef\xbd\xb3n y despliegue de Packages siguiendo el modelo de 1a generaci\xef\xbe\x83\xef\xbd\xb3n.\nPermite la conversi\xef\xbe\x83\xef\xbd\xb3n y empaquetado de c\xef\xbe\x83\xef\xbd\xb3digo en un package.\nTambi\xef\xbe\x83\xef\xbd\xa9n permite la creaci\xef\xbe\x83\xef\xbd\xb3n de versiones Beta del package y mediante el uso de los mecanismos de creaci\xef\xbe\x83\xef\xbd\xb3n de Orgs y ejecuci\xef\xbe\x83\xef\xbd\xb3n de Tests, crear una ORG, desplegar los Tests correspondientes y ejecutarlos.\nSi pudiste consultar el art\xef\xbe\x83\xef\xbd\xadculo que dediqu\xef\xbe\x83\xef\xbd\xa9 a la creaci\xef\xbe\x83\xef\xbd\xb3n de Managed Packages , te garantizo que el proceso de modificaci\xef\xbe\x83\xef\xbd\xb3n y despliegue es realmente tedioso cuando no se automatiza y consume una cantidad de tiempo ingente, donde no tienes la sensaci\xef\xbe\x83\xef\xbd\xb3n de ser muy productivo.\nGrupo de comandos force:schema\nPermite la consulta de los objetos que tenemos en la ORG. No creo que utilices estos comandos en las primeras fases de adopci\xef\xbe\x83\xef\xbd\xb3n de la CLI, pero ten presente que tienes la posibilidad del Describe v\xef\xbe\x83\xef\xbd\xada CLI. Por tanto, las funcionalidades de las que disponemos son:\nObtenci\xef\xbe\x83\xef\xbd\xb3n de la informaci\xef\xbe\x83\xef\xbd\xb3n de los objetos Standard y Custom.\nNota: podr\xef\xbe\x83\xef\xbd\xada pertenecer a otras \xef\xbe\x83\xef\xbd\xa1reas, ya que conocer el esquema de metadata puede tener muchas utilidades distintas\nGrupo de comandos force:source\nPara su uso exclusivo con el modelo DX y Scratch Orgs, sin\xef\xbe\x83\xef\xbd\xb3 est\xef\xbe\x83\xef\xbd\xa1s trabajando bajo este modelo, \xef\xbe\x83\xef\xbd\xa9chale un vistazo pero no ser\xef\xbe\x83\xef\xbd\xa1 tu foco de uso en primera instancia. Los comandos de este topic permiten:\nPush y Pull para sincronizar el c\xef\xbe\x83\xef\xbd\xb3digo/objetos/etc con nuestras Scratch Orgs (los elementos est\xef\xbe\x83\xef\xbd\xa1n traceados).\nDeploy y Retrieve con las ORGs en las que no tenemos nuestros elementos traceados.\nGrupo de comandos force:user\nEste topic nos permite la gesti\xef\xbe\x83\xef\xbd\xb3n de usuarios y la gesti\xef\xbe\x83\xef\xbd\xb3n de sus credenciales, que seguro vas a necesitar si tu intenci\xef\xbe\x83\xef\xbd\xb3n es automatizar etapas de Testing, CI/CD, etc.\nNos permite la creaci\xef\xbe\x83\xef\xbd\xb3n de usuarios, mantenimiento de sus credenciales y asignaci\xef\xbe\x83\xef\xbd\xb3n de Permission Sets.\nNota: podr\xef\xbe\x83\xef\xbd\xada pertenecer a otras \xef\xbe\x83\xef\xbd\xa1reas, ya que la creaci\xef\xbe\x83\xef\xbd\xb3n de usuarios puede ser \xef\xbe\x83\xef\xbd\xbatil en varios \xef\xbe\x83\xef\xbd\xa1mbitos, tests funcionales, etc., pero creo que tiene afinidad con los otros topics del \xef\xbe\x83\xef\xbd\xa1rea.\nLa creaci\xef\xbe\x83\xef\xbd\xb3n puede ser un simple comando o partir de una definici\xef\xbe\x83\xef\xbd\xb3n detallada en un fichero de configuraci\xef\xbe\x83\xef\xbd\xb3n. Dado que podemos tener tantos ficheros de configuraci\xef\xbe\x83\xef\xbd\xb3n como usuarios deseemos, esto permite el aprovisionamiento de usuarios de manera eficaz y simplificada.\n\xef\xbe\x83\xe3\x80\x89ea 4: Manipulaci\xef\xbe\x83\xef\xbd\xb3n de datos\nLa gesti\xef\xbe\x83\xef\xbd\xb3n de datos, es una tarea imprescindible y dependiendo de como la llevemos a cabo, nos permitir\xef\xbe\x83\xef\xbd\xa1 encontrar situaciones inesperadas\xe2\x80\xa6 pero es una tarea tediosa y repetitiva.\nSin ninguna duda, familiar\xef\xbe\x83\xef\xbd\xadzate con este topic y dom\xef\xbe\x83\xef\xbd\xadnalo.\nGrupo de comandos force:data\nLos comandos de este topic permiten:\nManipulaci\xef\xbe\x83\xef\xbd\xb3n de registros simples.\nImportaci\xef\xbe\x83\xef\xbd\xb3n y exportaci\xef\xbe\x83\xef\xbd\xb3n de datos en vol\xef\xbe\x83\xef\xbd\xbamenes, incluyendo el uso de la BULK API.\nSeguramente durante el desarrollo de funcionalidades, o testing del proyecto desees utilizar datos reales o ligeramente modificados (masking) para detectar situaciones inesperadas. Con estas funciones, puedes automatizar tanto la extracci\xef\xbe\x83\xef\xbd\xb3n del origen como la importaci\xef\xbe\x83\xef\xbd\xb3n en destino e incluso utilizar los mecanismos de la Bulk API para acelerar estas acciones.\n\xef\xbe\x83\xe3\x80\x89ea 5: Gesti\xef\xbe\x83\xef\xbd\xb3n de ORGs\nLa gesti\xef\xbe\x83\xef\xbd\xb3n de ORGs est\xef\xbe\x83\xef\xbd\xa1 claramente orientada a la gesti\xef\xbe\x83\xef\xbd\xb3n de las Scratch Orgs y su punto de referencia que es la Dev Hub Org. Nuevamente si no trabajas con DX, dudo que el topic Org te aplique desde el principio.\nGrupo de comandos force:org\nLos comandos de este topic permiten:\nCrear y Eliminar Orgs de tipo Scratch, por supuesto puedes listarlas y quedan asignadas a la Org padre, que denominamos Dev Hub.\nSe utilizan ficheros de definici\xef\xbe\x83\xef\xbd\xb3n (project-scratch-def.json), permitiendo caracter\xef\xbe\x83\xef\xbd\xadsticas como Edition que queremos usar (Professional, Enterprise), el idioma, y las features (Communities, Apex, etc.).\nSuper interesante, no te digo m\xef\xbe\x83\xef\xbd\xa1s.\nGrupo de comandos force:limits\nLos comandos de este topic permiten:\nObtener el consumo de recursos consumidos en las Orgs.\nImprescindible para detectar procesos que est\xef\xbe\x83\xef\xbd\xa1n causando un consumo excesivo inesperado y reportar al destinatario que todo seguir\xef\xbe\x83\xef\xbd\xa1 en orden cuando lleguemos a Producci\xef\xbe\x83\xef\xbd\xb3n.\nFlujos completos con uso de la CLI\nAhora, con una pincelada de las capacidades de la CLI, veamos algunas flujos ejemplo que podemos conseguir si orquestamos estos comandos de forma conjunta. Algunos casos reales son:\nCaso de uso 1: automatizaci\xef\xbe\x83\xef\xbd\xb3n de la creaci\xef\xbe\x83\xef\xbd\xb3n del puesto de trabajo\nAutorizamos la Sandbox en la que vamos a trabajar\nCreamos un nuevo proyecto\nObtenemos el c\xef\xbe\x83\xef\xbd\xb3digo de nuestro repositorio\nTransferimos metadata y c\xef\xbe\x83\xef\xbd\xb3digo a nuestra Sandbox\nCaso de uso 2: automatizaci\xef\xbe\x83\xef\xbd\xb3n de pruebas\nAutorizamos la Sandbox en la que vamos a trabajar si no lo est\xef\xbe\x83\xef\xbd\xa1 o creamos una Scratch Org\nObtenemos el c\xef\xbe\x83\xef\xbd\xb3digo de nuestro repositorio\nTransferimos metadata y c\xef\xbe\x83\xef\xbd\xb3digo a nuestra Org\nEjecutamos los Test de una clase o de todas\nObtenemos resultados y si existen caos, obtenemos su \xef\xbe\x83\xef\xbd\xbaltimo autor y lo notificamos\nCaso de uso 3: automatizaci\xef\xbe\x83\xef\xbd\xb3n de paquetes y despliegue\nCreamos varias Scratch Org, de diferentes ediciones: Enterprise, Professional y Developer\nObtenemos el c\xef\xbe\x83\xef\xbd\xb3digo de nuestro repositorio\nTransferimos metadata y c\xef\xbe\x83\xef\xbd\xb3digo a nuestras Orgs creadas\nCreamos UnManaged Packages para desplegar\nDesplegamos el mismo paquete en las 3 ORgs\nLanzamos los Tests en todas las Orgs\nObtenemos resultados y as\xef\xbe\x83\xef\xbd\xad conocemos si los paquetes sufren diferencias dependiendo de la edici\xef\xbe\x83\xef\xbd\xb3n\nDestruimos la Scratch Org\nMejor paro aqu\xef\xbe\x83\xef\xbd\xad, seguro que ya tienes una idea de lo que puedes llegar a automatizar en tu proyecto, y las posibilidades que se abren ante ti.\nUna cosa m\xef\xbe\x83\xef\xbd\xa1s\xe2\x80\xa6 es ampliable\nPues si, ya existe la posibilidad de ampliar la CLI con nuestros propios comandos en forma de plugins que podemos crear, y para los cuales Salesforce proporciona una API y procedimiento definido.\nPor tanto, puedes crear tus propios plugins y adaptar la CLI u ofrecer plugins complementarios a la comunidad. Por supuesto, ya existen ejemplos de miembros de la comunidad, que son unos cracks, y ya han creado plugins de ejemplo, aunque si te est\xef\xbe\x83\xef\xbd\xa1s iniciando yo dejar\xef\xbe\x83\xef\xbd\xada este aspecto para m\xef\xbe\x83\xef\xbd\xa1s adelante.\nConclusiones\nThe first rule of any technology used in a business is that automation applied to an efficient operation will magnify the efficiency. The second is that automation applied to an inefficient operation will magnify the inefficiency. Bill Gates.\nUn art\xef\xbe\x83\xef\xbd\xadculo de CLI sin un solo comando.. no s\xef\xbe\x83\xef\xbd\xa9 si es buena idea, pero mi intenci\xef\xbe\x83\xef\xbd\xb3n si lo era.\nLa CLI nos abre la puerta a la creaci\xef\xbe\x83\xef\xbd\xb3n de flujos automatizados de desarrollo, testing, CI/CD, liber\xef\xbe\x83\xef\xbd\xa1ndonos de tareas repetitivas y consiguiendo nuevas niveles de calidad y profesionalidad en nuestros proyectos.\nMi recomendaci\xef\xbe\x83\xef\xbd\xb3n es empezar por la mecanizaci\xef\xbe\x83\xef\xbd\xb3n de un proceso muy simple, en tu propia m\xef\xbe\x83\xef\xbd\xa1quina, y exp\xef\xbe\x83\xef\xbd\xb3n tus hallazgos a tus compa\xef\xbe\x83\xef\xbd\xb1eros, y posteriormente a tus responsables para llegar a si al acuerdo de dedicar tiempo a la mecanizaci\xef\xbe\x83\xef\xbd\xb3n de procesos del equipo. Te habr\xef\xbe\x83\xef\xbd\xa1s convertido en el banco del tiempo de tus compa\xef\xbe\x83\xef\xbd\xb1eros.\nCreo que la relaci\xef\xbe\x83\xef\xbd\xb3n coste-beneficio con la CLI, es un coeficiente muy favorable. Aquellos equipos que entiendan y promulguen su uso, obtendr\xef\xbe\x83\xef\xbd\xa1n beneficios y transmitir\xef\xbe\x83\xef\xbd\xa1n una calidad en sus procesos que el resto no podr\xef\xbe\x83\xef\xbd\xa1 aportar sin costes mucho m\xef\xbe\x83\xef\xbd\xa1s elevados.\nSi como yo est\xef\xbe\x83\xef\xbd\xa1s interesado, puedes empezar ahora mismo, con el repositorio sfdx-simple que ofrece Salesforce y los otros proyectos de la Samples Gallery como Dreamhouse, etc.\nNo pod\xef\xbe\x83\xef\xbd\xada acabar sin\xef\xbe\x83\xef\xbd\xb3 con un: sfdx:espero:quesea:deayuda --json\nEnlaces Interesantes\n'